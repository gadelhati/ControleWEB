<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html 
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui"
    xmlns:fn="http://java.sun.com/jsp/jstl/functions"
    xmlns:c="http://java.sun.com/jstl/core"
>
<h:head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<title>Controle - Pessoa</title>
</h:head>
<h:body>

	<div class="header">
		<ui:insert name="header">
			<ui:include src="/Filtro/paginas/log/log.xhtml"></ui:include>
		</ui:insert>
	</div>
	
	<h:form id="Pessoa">
		
		<p:panel id="panel" footer="Detalhes da Pessoa" >
		
			<p:growl id="mensagens" showDetail="true" life="5000" autoUpdate="true" closable="true" />
			<p:focus context="panel"/>
			
			<p:contextMenu for="tabela">
				<p:menuitem value="Dynamic Focus" onclick="PF('dlg').show();" type="button" icon="ui-icon-extlink" />
				<p:menuitem value="CRUD" id="crud" onclick="PF('crud').show();" icon="ui-icon-disk" />
				<p:menuitem value="Inserir" id="inserircm" actionListener="#{mbPessoa.inserir}" icon="ui-icon-disk" update="tabela" />
				<p:menuitem value="Alterar" id="alterarcm" actionListener="#{mbPessoa.alterar}" icon="ui-icon-disk" update="tabela" />
				<p:menuitem value="Excluir" id="excluircm" actionListener="#{mbPessoa.excluir}" icon="ui-icon-disk" update="tabela" />
			</p:contextMenu>
			
			<p:dataTable
				id="tabela"
				var="item"
				value="#{mbPessoa.lista}"
				paginator="true"
				rows="5"
				emptyMesage="Não há registros na tabela"
				paginatorTempalte="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
				rowsPerPageTemplate="5,10,15"
				resizableColumns="true"
				sortMode="multiple"
				draggableColumns="true"
				draggableRows="true"
				
				widgetVar="pessoaTabela"
				
				selectionMode="single"
				selection="#{mbPessoa.pessoa}"
				rowKey="#{item.id}"
				reflow="true"
			>
			<!-- {Exporters} -->
			<!-- 
				scrollable="true"
				scrollHeight="150" -->
			
				<f:facet name="header">
					#{fn:length(mbPessoa.lista)} Pessoa(s)
					<p:commandButton id="toggler" type="button" value="Colunas" icon="ui-icon-calculator" />
					<p:columnToggler datasource="tabela" trigger="toggler" />
				</f:facet>
				<!-- 
				<f:facet name="{Exporters}">
					<h:commandLink>
					<p:graphicImage name="/Filtro/imagens/usuario.png" />
					<p:dataExporter type="pdf" target="tabela" fileName="lista"/>
					</h:commandLink>
				</f:facet>
				 -->
				
				<p:column headerText="Id" sortBy="#{item.id}" filterBy="#{item.id}" filterMatchMode="contains" priority="1" >
					<h:outputText value="#{item.id}" ></h:outputText>
				</p:column>
				<p:column headerText="Nome" sortBy="#{item.nome}" filterBy="#{item.nome}" filterMatchMode="contains" priority="2" >
					<h:outputText value="#{item.nome}" ></h:outputText>
				</p:column>
				<f:facet name="footer">
					<p:clock />
					<p:commandButton process="tabela" update="tabela" icon="ui-icon-search" value="View" oncomplete="PF('Dialogo').show()" />
				</f:facet>
				
			</p:dataTable>
			
			<p:dialog header="Selecionado" widgetVar="crud" modal="true" showEffect="fade" hideEffect="fade" resizable="false">
				<h:outputText value="#{item.id}" />
				<h:outputText value="Valor" />
			</p:dialog>
			
			
			
		</p:panel>
		
    </h:form>
	
</h:body>
</html>